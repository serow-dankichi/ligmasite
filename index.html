<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="canonical" href="https://bundainamco.com/">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>ホーム | りぐまサイト</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="stylesheet" href="/global.css?2508281531">
    <meta name="theme-color" content="dark-green">
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@ligma6alls"/>
    <meta name="twitter:description" content="りぐまのサイト、りぐまサイト。"/>
</head>
<body>
    <header>
        <h1>
            <a href="https://bundainamco.com/">りぐまサイト</a>
        </h1>
    </header>
    <p class="top-object">
    <h3>今週の時間割（11月11日更新）</h3>
    <div id="nav">
        <button id="prev">&lt;前の週</button>
        <button id="next">次の週&gt;</button>
    </div>
    <div id="image-container">
        <img id="timetable" alt="時間割画像が見つかりません">
    </div>

    <script>
    const IMG_VERSION = "2025-11-11";
    // 今日の日付
    const today = new Date();
    let offset = 0;

    // 今週の土曜を取得（今日が土曜なら今日）
    function getSaturdayBaseDate(offsetWeeks) {
        const base = new Date(today);
        const day = base.getDay();
        const diff = (day >= 6) ? 0 : -(day + 1); // 土曜:6, 金曜:5...日曜:0
        base.setDate(base.getDate() + diff + offsetWeeks * 7);
        return base;
    }

    // 年初の最初の土曜日
    function getFirstSaturday(year) {
        const jan1 = new Date(year, 0, 1);
        const day = jan1.getDay();
        const diff = (day <= 6) ? (6 - day) : 0;
        jan1.setDate(jan1.getDate() + diff);
        return jan1;
    }

    function updateImage() {
        // 今週の土曜日を起点とした週番号
        const saturday = getSaturdayBaseDate(offset);
        const year = saturday.getFullYear();
        const firstSat = getFirstSaturday(year);

        const diffDays = Math.floor((saturday - firstSat) / (1000 * 60 * 60 * 24));
        const weekNumber = Math.floor(diffDays / 7) + 1;

        // 画像ファイルパス
        const imagePath = `/timetable/${year}-${weekNumber}.png?v=${IMG_VERSION}`;

        // 挿入
        document.getElementById("timetable").src = imagePath;
    }

    document.getElementById("prev").addEventListener("click", () => {
        offset--;
        updateImage();
    });

    document.getElementById("next").addEventListener("click", () => {
        offset++;
        updateImage();
    });

    updateImage();
    </script>
</body>
</html>
